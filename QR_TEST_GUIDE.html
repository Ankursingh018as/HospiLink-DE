<!-- TEST INSTRUCTIONS FOR QR SYSTEM -->
<!DOCTYPE html>
<html>
<head>
    <title>QR System Test Guide</title>
    <style>
        body { font-family: Arial; padding: 40px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        h1 { color: #00adb5; }
        .step { background: #e7f3ff; padding: 15px; margin: 15px 0; border-left: 4px solid #00adb5; }
        .step h3 { margin-top: 0; color: #0e545f; }
        code { background: #f0f0f0; padding: 2px 6px; border-radius: 3px; }
        .success { color: #28a745; font-weight: bold; }
        .url { background: #fff3cd; padding: 10px; border-radius: 5px; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üè• QR Patient Management - Test Guide</h1>
        <p>Follow these steps to test the real-time QR system with email integration.</p>

        <div class="step">
            <h3>Step 1: Ensure Database Tables Exist</h3>
            <p>Visit: <code class="url">http://localhost/HospiLink-DE/install_qr_tables.php</code></p>
            <p>Click "Install QR Tables" to create all necessary database tables.</p>
            <p><strong>Expected Result:</strong> <span class="success">‚úì All tables created successfully</span></p>
        </div>

        <div class="step">
            <h3>Step 2: Login as Doctor</h3>
            <p>Visit: <code class="url">http://localhost/HospiLink-DE/sign_new.html</code></p>
            <p><strong>Credentials:</strong></p>
            <ul>
                <li>Email: <code>dr.patel@hospilink.com</code></li>
                <li>Password: <code>doctor123</code></li>
            </ul>
            <p><strong>Expected Result:</strong> <span class="success">‚úì Redirected to Doctor Dashboard</span></p>
        </div>

        <div class="step">
            <h3>Step 3: Admit a New Patient</h3>
            <p>Click "Admit Patient" from dashboard OR visit:</p>
            <p><code class="url">http://localhost/HospiLink-DE/admit.html</code></p>
            <p><strong>Fill in test data:</strong></p>
            <ul>
                <li>Patient Name: <code>Test Patient</code></li>
                <li>Gender: <code>Male</code></li>
                <li>Date of Birth: <code>1990-01-01</code></li>
                <li>Admit Date: <code>Today's date</code></li>
                <li>Blood Group: <code>O+</code></li>
                <li><strong>‚ú® Email: <code>testpatient@example.com</code></strong> (NEW FIELD)</li>
                <li>Phone: <code>9999999999</code></li>
                <li>Disease: <code>Fever and cough</code></li>
                <li>Address: <code>123 Test Street</code></li>
                <li>Bed: <code>Select any available bed</code></li>
                <li>Doctor: <code>Dr. Ramesh Patel</code></li>
            </ul>
            <p><strong>Expected Result:</strong> <span class="success">‚úì Patient admitted! Redirected to QR Print Page</span></p>
            <p><strong>Verify:</strong> Email field is visible and required ‚úì</p>
        </div>

        <div class="step">
            <h3>Step 4: Print/Save QR Code</h3>
            <p>On the QR print page, you should see:</p>
            <ul>
                <li>Patient name and details</li>
                <li>QR code (scannable)</li>
                <li>QR token code (e.g., HOSP-1734123456-ABCDEF123456-ABC)</li>
                <li>Bed assignment</li>
                <li>Doctor assignment</li>
            </ul>
            <p><strong>Copy the QR token</strong> for next step!</p>
            <p><strong>Expected Result:</strong> <span class="success">‚úì QR code generated successfully</span></p>
        </div>

        <div class="step">
            <h3>Step 5: Scan QR Code (Manual Entry)</h3>
            <p>Visit: <code class="url">http://localhost/HospiLink-DE/scan.php</code></p>
            <p>Paste the QR token you copied in Step 4</p>
            <p><strong>Expected Result:</strong> <span class="success">‚úì Redirected to Patient Status Dashboard</span></p>
        </div>

        <div class="step">
            <h3>Step 6: View Real-Time Patient Dashboard</h3>
            <p>You should now see the patient status page with REAL DATABASE DATA:</p>
            <ul>
                <li><strong>‚úì Patient Info:</strong> Name, email, phone, bed, doctor (from <code>users</code> + <code>patient_admissions</code> tables)</li>
                <li><strong>‚úì Current Medicines:</strong> Empty initially (from <code>patient_medicines</code> table)</li>
                <li><strong>‚úì Active IVs:</strong> Empty initially (from <code>patient_ivs</code> table)</li>
                <li><strong>‚úì Test Reports:</strong> Empty initially (from <code>patient_test_reports</code> table)</li>
                <li><strong>‚úì Doctor Notes:</strong> Empty initially (from <code>doctor_notes</code> table)</li>
                <li><strong>‚úì Upcoming Tasks:</strong> Empty initially (from <code>treatment_schedule</code> table)</li>
            </ul>
            <p><strong>Verify:</strong> Patient email displays correctly ‚úì</p>
            <p><strong>Expected Result:</strong> <span class="success">‚úì All sections render (even if empty)</span></p>
        </div>

        <div class="step">
            <h3>Step 7: Add Medicine (Real-Time Test)</h3>
            <p>Click <strong>"Add Medicine"</strong> button on patient dashboard</p>
            <p><strong>Fill in:</strong></p>
            <ul>
                <li>Medicine Name: <code>Paracetamol</code></li>
                <li>Dosage: <code>500mg</code></li>
                <li>Frequency: <code>Every 6 hours</code></li>
                <li>Route: <code>Oral</code></li>
                <li>Start Date: <code>Today</code></li>
                <li>Instructions: <code>Take with water after meals</code></li>
            </ul>
            <p>Click Submit</p>
            <p><strong>Expected Result:</strong> <span class="success">‚úì Medicine added! Shows in "Current Medicines" section instantly</span></p>
            <p><strong>Database Verification:</strong> Check <code>patient_medicines</code> table - new record exists ‚úì</p>
        </div>

        <div class="step">
            <h3>Step 8: Add IV/Drip (Real-Time Test)</h3>
            <p>Click <strong>"Add IV/Drip"</strong> button</p>
            <p><strong>Fill in:</strong></p>
            <ul>
                <li>Fluid Type: <code>Normal Saline</code></li>
                <li>Volume: <code>500</code> ml</li>
                <li>Flow Rate: <code>100 ml/hour</code></li>
                <li>Started At: <code>Current time</code></li>
                <li>Expected End: <code>+5 hours</code></li>
                <li>Site Location: <code>Left hand</code></li>
                <li>Notes: <code>Patient tolerating well</code></li>
            </ul>
            <p>Click Submit</p>
            <p><strong>Expected Result:</strong> <span class="success">‚úì IV added! Shows in "Active IVs/Drips" section instantly</span></p>
            <p><strong>Database Verification:</strong> Check <code>patient_ivs</code> table - new record exists ‚úì</p>
        </div>

        <div class="step">
            <h3>Step 9: Order Test (Real-Time Test)</h3>
            <p>Click <strong>"Order Test"</strong> button</p>
            <p><strong>Fill in:</strong></p>
            <ul>
                <li>Test Type: <code>Blood Test</code></li>
                <li>Test Name: <code>Complete Blood Count (CBC)</code></li>
                <li>Ordered At: <code>Current time</code></li>
                <li>Priority: <code>Routine</code></li>
            </ul>
            <p>Click Submit</p>
            <p><strong>Expected Result:</strong> <span class="success">‚úì Test ordered! Shows in "Test Reports" section with status "Ordered"</span></p>
            <p><strong>Database Verification:</strong> Check <code>patient_test_reports</code> table - new record exists ‚úì</p>
        </div>

        <div class="step">
            <h3>Step 10: Add Doctor Note (Real-Time Test)</h3>
            <p>Click <strong>"Add Note"</strong> button</p>
            <p><strong>Fill in:</strong></p>
            <ul>
                <li>Note Type: <code>Checkup</code></li>
                <li>Chief Complaint: <code>Fever and cough</code></li>
                <li>Examination: <code>Lungs clear, no wheezing</code></li>
                <li>Diagnosis: <code>Upper respiratory tract infection</code></li>
                <li>Treatment Plan: <code>Continue antibiotics, monitor fever</code></li>
                <li>BP: <code>120/80</code></li>
                <li>Pulse: <code>78</code></li>
                <li>Temp: <code>99.5</code></li>
                <li>SpO2: <code>98</code></li>
            </ul>
            <p>Click Submit</p>
            <p><strong>Expected Result:</strong> <span class="success">‚úì Note added! Shows in "Doctor Notes" section with vitals</span></p>
            <p><strong>Database Verification:</strong> Check <code>doctor_notes</code> table - new record exists ‚úì</p>
        </div>

        <div class="step">
            <h3>‚úÖ Final Verification Checklist</h3>
            <ul>
                <li>‚úì Email field appears in admit form</li>
                <li>‚úì Email saves to database (check <code>users</code> table)</li>
                <li>‚úì QR code generates successfully</li>
                <li>‚úì QR scan redirects to patient dashboard</li>
                <li>‚úì Patient info displays from database (not hardcoded)</li>
                <li>‚úì Medicines added show up immediately</li>
                <li>‚úì IVs added show up immediately</li>
                <li>‚úì Tests ordered show up immediately</li>
                <li>‚úì Doctor notes show up immediately</li>
                <li>‚úì All data persists after page refresh</li>
                <li>‚úì Multiple QR scans logged in <code>qr_scan_logs</code> table</li>
            </ul>
            <p><strong>Result:</strong> <span class="success" style="font-size: 20px;">üéâ QR SYSTEM FULLY FUNCTIONAL WITH REAL-TIME DATA!</span></p>
        </div>

        <hr style="margin: 30px 0;">

        <div class="step" style="background: #d4edda; border-left-color: #28a745;">
            <h3>üöÄ System is Production Ready!</h3>
            <p><strong>No mock data used</strong> - All information is pulled directly from the database in real-time.</p>
            <p><strong>Email integration complete</strong> - Patient emails are captured and stored during admission.</p>
            <p><strong>QR workflow operational</strong> - Scan ‚Üí View ‚Üí Update ‚Üí Save ‚Üí Refresh ‚Üí Display new data.</p>
        </div>
    </div>
</body>
</html>
